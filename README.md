# Игра мафия
Данный репозиторий реализует клиент и сервер для игры в мафию на основе gRPC.

## Запуск сервера
Собирается и запускается командами:
```
docker build -t server --build-arg ADDR=0.0.0.0:50051 -f ./Dockerfile_server .
docker run -it --network host server
```
Адрес сервера передается через параметр сборки. Адрес по умолчанию `0.0.0.0:50051`.
Сервер подключает игроков и создает новую сессию сразу, как только набирается 4 свободных игрока.

## Запуск клиента
Собирается и запускается командами:
```
docker build -t client --build-arg ADDR=0.0.0.0:50051 -f ./Dockerfile_client .
docker run -it --network host client
```
Адрес сервера передается через параметр сборки. Адрес по умолчанию `0.0.0.0:50051`.

## Игровой процесс
На старте клиент спросит, хотите ли вы запустить его в бот режиме.
В режиме бота клиент полностью автономен, каждый раз выбирает случайные действия.
Далее будет запрошено имя, под которым данный клиент будет отображаться на сервере.
Имена могут быть не уникальными, ведь сервер выдает каждому клиенту уникальный идентификатор.
После подключения к серверу, клиент будет ожидать от вас ввода команд.
Всегда можно ввести команду `help` и увидеть cписок доступных команд.
Кроме `help` есть команды:
```
c - Переподключиться к серверу с другим именем (текущая сессия теряется).
v - Узнать доступные действия во время активной сессии игры в мафию (их также можно вводить).
a - Узнать список всех игроков на сервере.
s - Узнать состояние текущей сессии (полезная и очень информативная команда).
exit - Выйти из клиента.
```

Если запустили клиент в бот режиме, не бойтесь убивать его, ведь сам он играть не закончит.
Сервер распознает такие ситуации и примет соответствующие действия.
Если отключаемый игрок имел статус духа, до текущая сессия не завершается, 
если же игрок не был духом, сессия завершается для всех.
Голосовать за себя можно.
Если в процессе голосования нельзя установить одного лидера, тогда никто не умирает.

Приятной игры!
